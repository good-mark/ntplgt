
          ﻿Шерстюков О.Н. Sherstyukov O.N.
доктор физико-математических наук, профессор, зав. кафедрой «Радиофизика» Казанского (Приволжского) федерального университета, Россия, г. Казань
УДК 550.8.028
АППАРАТНОЕ И ПРОГРАММНОЕ ОБЕСПЕЧЕНИЕ БЕСПРОВОДНОЙ СИСТЕМЫ ТЕЛЕМЕТРИИ ДЛЯ ГЕОЛОГО-ТЕХНОЛОГИЧЕСКИХ ИССЛЕДОВАНИЙ
Описывается модульно-сетевой подход, примененный при разработке программного обеспечения автоматизированной интеллектуальной системы геолого-технологических исследований (ГТИ), основанной на беспроводной системе сбора данных с датчиков. Модульно-сетевая архитектура позволила создать гибкую масштабируемую систему ГТИ с возможностью динамического подключения различных функциональных аппаратных и программных модулей для сбора и обработки данных.
Описываются радиопередающие модули, являющиеся основой аппаратного обеспечения автоматизированной интеллектуальной системы геолого-технологических исследований, а также средства управления и мониторинга основных технологических параметров.
Ключевые слова: геолого-технологические исследования, радиопередающие модули, автономное питание.
Киргизов Д.И.
Kirgizov D.I.
кандидат технических наук, доцент кафедры «Естественнонаучные дисциплины» Бугульминского филиала «Казанский национальный исследовательский технический университет им. А.Н. Туполева - КАИ», Россия, г. Бугульма
Иванов А.А. Ivanov A.A.
руководитель группы ООО «ТНГ-Групп», Россия, г. Бугульма
HARDWARE AND SOFTWARE FOR WIRELESS MUD LOGGING TELEMETRY SYSTEM
It is described a modular network approach applied while the development of the automated intellectual system software for Mud Logging operations based on wireless system of data recording from the sensors. Modular network architecture has allowed generating of a flexible scalable Mud Logging system with the ability of dynamic hooking up to the different functional software and hardware modules for data recording and processing.
Radio transmitting modules are described being the basis of the hardware of the automated intellectual system for Mud Logging as well as the controlling and monitoring means of the main technological parameters.
Key words: Mud Logging, radio transmitting modules, self-contained power supply.
Введение
В работе описывается модульно-сетевой подход, примененный при разработке автоматизированной интеллектуальной системы сбора, хранения и передачи геолого-технологических и геофизических дан-
ных (далее АИС). Описываемая система представляет собой аппаратно-программный комплекс (АПК), решающий большой спектр задач по автоматизации геолого-технологических исследований (ГТИ) в про -цессе строительства скважины, включая измерения
и регистрацию первичных физических параметров, комплексную обработку результатов измерения, оперативный мониторинг бурения скважины, расчет технологических и экономических параметров, генерацию отчетов и построение геологических разрезов.
Рассматриваемая система АИС решает следующие основные задачи:
•	прием данных с беспроводной сети датчиков ГТИ посредством радиоканала;
•	первичная и вторичная обработка данных;
•	расчет и визуальное наблюдение основных параметров ГТИ;
•	регистрация значений всех параметров в единой базе данных как функции от времени и от глубины (с учетом задержки);
•	прием и регистрация данных с других источников: хроматографа, LWD-системы;
•	возможность подключения программных модулей для сопряжения с другими источниками данных;
•	построение ствола скважины в режиме реального времени по данным забойной телеметрической системы;
•	поддержка беспроводных информационных табло;
•	создание графических отчетов для временных и глубинных зависимостей;
•	создание табличных отчетов;
•	удаленный мониторинг отдельной скважины или группы скважин через сеть Интернет.
Рассматриваемая система имеет следующие технические преимущества:
•	отсутствие сигнальных кабелей между центром сбора данных и датчиками;
•	автономное электропитание большинства датчиков ГТИ (отсутствие питающих кабелей);
•	быстрое время развертывания (не надо прокладывать кабель);
•	высокая степень модульности и легкость интегрирования дополнительных аппаратных или программных модулей;
•	применение гибкой сетевой технологии и модели «клиент - сервер»;
•	низкая стоимость требуемого системного программного обеспечения (операционная система и сервер хранения данных).
В работе описывается аппаратное обеспечение автоматизированной интеллектуальной системы сбо -ра, хранения и передачи геолого-технологических и геофизических данных (далее - АИС ГТИ), содержащее в своем составе:
1)	комплект датчиков геолого-технологических исследований для измерения основных параметров при бурении;
2)	комплект радиопередающих модулей, предназначенных для передачи данных с датчиков ГТИ по радиоканалу;
3)	координатор радиосети.
Из особенностей АИС ГТИ следует отметить возможность организации беспроводной сети сбора данных с датчиков, а также возможность автономного электропитания датчиков от электрохимических элементов, расположенных непосредственно в радиопередающих модулях (далее РПМ).
При разработке аппаратного обеспечения АИС ГТИ требовалось обеспечить автономную работу каждого датчика и соответствующего РПМ от одного комплекта элементов питания в течение интервала времени не менее 10 суток. Учитывая необходимость электропитания не только датчика ГТИ, но и самой схемы РПМ, возникает необходимость использования режима крайней экономии электроэнергии.
Структура АИС
На рис. 1 представлена общая структура АИС. Основная часть системы располагается на станции ГТИ, включающей сервер регистрации и обработки данных, рабочие места геолога и оператора ГТИ, координатор радиосети датчиков, газоаналитическое оборудование, оборудование локальной компьютерной сети, систему спутниковой или сотовой связи для доступа в глобальную сеть. На буровой установке, насосных агрегатах, в емкостной системе и на других вспомогательных объектах устанавливаются датчики ГТИ. В системе возможно использование большого ассортимента существующих промышленных датчиков различных производителей с аналоговыми и цифровыми выходами. Для автономного питания датчика и передачи с него данных на станцию ГТИ к датчику подключается радиопередающий модуль. В корпус РПМ устанавливается батарея автономного электропитания самого модуля и датчика. В системе также предусмотрена совместная работа с оборудованием забойной телеметрической системы, располагаемым на станции MWD и LWD.
В офисе сервисной компании устанавливается центральный сервер сбора данных (ЦССД) с серверным ПО, к которому подключаются по высокоскоростному каналу компьютеры супервайзеров.
Сбор данных с датчиков происходит по радиоканалу посредством асинхронной передачи информационных пакетов. Каждый РПМ имеет свой уникальный адрес, который оператором привязывается к определенному датчику ГТИ, в результате имеется возможность связывания первичных измеряемых физических параметров с адресом РПМ - источника
Рис. 1. Структура АИС
данных. Период опроса и передачи данных с датчика устанавливается в каждом РПМ независимо. В системе также предусматривается дистанционная диагностика и мониторинг напряжения на батареях РПМ по радиоканалу. Благодаря беспроводной технологии построения сети датчиков возникает возможность быстрого подключения новых датчиков без какого-либо вмешательства в конфигурацию уже существующей сети. Новые РПМ определяются автоматически, и оператору остается только связать новый датчик с физическим параметром.
Архитектура программного обеспечения Рассмотрим архитектуру программного обеспечения (ПО) АИС (рис. 2). Основной особенностью предлагаемой архитектуры является модульный принцип функционирования и сетевая организация обмена данными. На локальном уровне станции ГТИ центральной частью ПО является собственно сервер обработки и регистрации данных (СРД). Сервер обменивается информацией с «клиентами» - модулями обработки данных или пользовательскими программами с графическим интерфейсом. Перечислим основные функции сервера:
1)	получение данных по измерениям из модулей сопряжения с какими-либо внешними устройствами (например, с координатором радиосети датчиков или газоаналитическим комплексом);
2)	организация подключения «клиентов» и их взаимодействия на основе передачи настроек, параметров и других объектов;
3)	отправка «клиентам» текущего состояния радиосети датчиков (например, уровень заряда батарей питания), а также передача управляющих команд на датчики (например, смена периода измерения);
4)	применение калибровок измерительных каналов датчиков;
5)	первичная обработка данных на основе программируемых схем обработки;
6)	регистрация всех изменяемых данных на магнитном носителе;
7)	организация авторизованного доступа клиентов к данным сервера и настройкам;
8)	прием команд настройки сервера от клиента, хранение настроек;
9)	передача новых данных на другие подключенные модули для последующей обработки;
10)	обработка запросов на получение любых ранее зарегистрированных данных;
11)	контроль свободного дискового пространства, а также обработка аварийных (технических) ситуаций с последующей отправкой сообщений «клиентам»;
12)	передача управляющих команд и данных на модули сопряжения с внешними информационными
Рис. 2. Модульно-сетевая архитектура программного обеспечения АИС
табло (например, «Пульт бурильщика»). СРД взаимодействует с «клиентами» (модулями или пользовательскими программами), представляющими собой отдельные процессы, посредством стандартного механизма сетевых сокетов, основанного на стеке протоколов TCP/IP. В предложенной схеме взаимодействия фактически обязательным является только сервер, следовательно, при отключении одного или нескольких модулей, что может произойти в результате программного сбоя, система не перестает работать и продолжает регистрировать все доступные данные. Таким образом, АИС представляет собой отказоустойчивую систему с возможностью легкой интеграции нового ПО - модулей сервера, которые можно подключать или отключать, не останавливая сервер и не прерывая процесс регистрации и обработки данных. Это выгодно отличает АИС от аналогичных систем. Однако в этом случае особое внимание следует уделить программному коду, стабильности работы и тестированию самого СРД, а также наиболее важных модулей, выполняющих вычисления важнейших технологических или геологических параметров.
и т. п.), импульсные датчики (датчик ходов насоса, оборотов ротора) и датчики с микропроцессорным управлением (ультразвуковые расходомеры, газоанализаторы) показал следующее:
1)	отдельная группа датчиков может совместно работать с РПМ в режиме автономного батарейного питания без каких-либо изменений в конструкции или схемотехнике;
2)	отдельная группа датчиков может совместно работать с РПМ в режиме автономного батарейного питания при условии изменения схемотехники и внесения конструктивных изменений;
3)	отдельная группа датчиков, в силу специфики физических явлений, лежащих в основе применяемых методов измерения, имеет значительную потребляемую мощность и не может использоваться в режиме автономного батарейного электропитания.
В общем случае РПМ для передачи данных с датчиков ГТИ представляет собой блок размерами 171 х 121 х 55 мм, включающий электронную плату, преобразователь напряжения и внутренний источник питания. Блок-схема РПМ приведена на рис. 3.
Аппаратная часть Согласно структуре АИС ГТИ РПМ должен обеспечивать работу с аналоговыми, импульсными и цифровыми датчиками, а также возможное интеллектуальное управление электропитанием подключаемого датчика с выбором оптимального режима измерения.
Анализ конструкторских и схемотехнических особенностей ряда типовых промышленных датчиков ГТИ, включая датчики с аналоговым выходом (температура, давление, вес, электропроводность
Рис. 3. Блок-схема РПМ для передачи данных с датчиков ГТИ
Также этот блок выполняет функции обработки поступающих с датчика данных (оцифровку аналоговых сигналов, обработку импульсных и цифровых сигналов с соответствующих датчиков). Радиомодем передает обработанные данные по радиоканалу на координатор радиосети.
Внешний вид РПМ приведен на рис. 4.
Рис. 4. Внешний вид РПМ для передачи данных с датчиков ГТИ
К РПМ для передачи данных с аналогового датчика через стандартный 4-проводный интерфейс может быть подключен датчик с аналоговым выходом по напряжению (диапазон 0...5 В) или току (диапазон 4...20 мА). РПМ обеспечивает питание датчика стабилизированным напряжением +12 В и током до 100 мА. При автономном питании аналоговых датчиков применяется импульсный режим питания. При таком режиме средний ток потребления можно сократить более чем на порядок, а время автономной работы довести до нескольких месяцев. При этом, учитывая, что саморазряд применяемых элементов питания практически отсутствует, от одного элемента можно питать датчик в процессе нескольких циклов работы буровой установки. С установленным оператором АИС периодом (от 250 мс с шагом 250 мс) РПМ оцифровывает сигнал с датчика и передает данные по радиоканалу на координатор радиосети.
РПМ для передачи данных с импульсного датчика позволяет измерять период следования импульсов, поступающих с подключенного через 4-проводный интерфейс датчика ходов насоса. При поступлении импульса с датчика РПМ передает значение 16-разрядного счетчика времени по радиоканалу на координатор радиосети. По разности значений счетчика определяется период следования импульсов.
РПМ для передачи данных с цифрового датчика предназначен для совместной работы с датчиком оборотов лебедки (ДОЛ), питание которого осуществляется только от РПМ с применением электронной схемы управления. К РПМ через 7-провод-ный интерфейс может быть подключен датчик с
оптическим энкодером угловых перемещений с возможностью определения направления вращения, выдающий 128 импульсов на один оборот вала. РПМ обеспечивает питание датчика стабилизированным напряжением +5 В и током до 50 мА. РПМ с периодом 500 мс передает значение 16-разрядного реверсивного счетчика импульсов по радиоканалу на координатор радиосети.
Для оперативного мониторинга основных технологических параметров в рамках АИС ГТИ разработан макет мобильного беспроводного информационного пульта. Пульт представляет собой портативный прибор, имеющий автономный источник питания, электронную плату, алфавитноцифровой жидкокристаллический дисплей (ЖКИ). Пульт имеет радиомодем, аналогичный применяемому в РПМ, и при включении питания автоматически подключается к радиосети всех РПМ системы. Информация на пульт передается через радиоканал с координатора радиосети с задаваемыми оператором ГТИ содержанием и периодичностью.
Пульт позволяет контролировать определенные параметры системы, в том числе технологические параметры бурения и диагностические параметры радиосети.
На рис. 5 показан внешний вид макета пульта. В состав комплекса АИС ГТИ может входить несколько пультов, в этом случае в системе предусмотрена независимая настройка каждого пульта.
яшяшёяшшяёяшя
Рис. 5. Внешний вид макета пульта мобильного беспроводного информационного пульта
Для диагностики беспроводной сети сбора данных написана программа Radiomon. Radiomon позволяет отслеживать основные параметры РПМ:
1)	состояние соединения;
2)	сетевой адрес;
3)	время приема последнего пакета;
4)	заряд батареи питания;
5)	напряжение батареи питания;
6)	уровень радиосигнала;
7)	установленный период измерения параметра ГТИ;
8)	количество принятых пакетов;
9)	количество потерянных пакетов;
10)	показания АЦП.
Интерфейс программы приведен на рис. 6 и представляет собой таблицу, отображающую параметры РПМ, приведенные выше. Список отображаемых
программой параметров можно настраивать. В случае потери связи с каким-либо РПМ происходит оповещение оператора. Помимо мониторинга сети программа предоставляет возможность управления РПМ путем отправки им командных сообщений.
radiomon 0.0.24
^ © 0 О Sixc ЁЭ 1												
Соединение	1 'D	1 Родительский ID !	1 Время 1 Заряд |ипит|	Питание	1 Уст. период 1	1 Период	RSSI	АЦП0	АЦП1	І АЦП2	І АЦПЗ	
•	0000F454	00000000	16:24:31 |||||| ^ 7.10	Cable power 5V	321	432	.■III	28	4671	0	0	
<§>	0000F450	0000F454	16:24:35 ||||| ¡3 7.10	Cable power 5V	321	432	..■■Hill	1	4671	0	0	
©	0000F451	0000F450	16:24:37 | 7.10	Cable power 5V	321	432		Hill	57	4671	0	0	
т	0000F452	0000F450	16:24:32 7.10	Cable power 5V	321	432	..•llllll	66	4671	0	0	
т	0000F453	OOOOF452	16:24:37 ||||||Ц ^ 7.10	Cable power 5V	321	432	■ ■III	62	4671	0	0	
<§>	0000F455	OOOOF451	16:24:24 | ¡3 7.10	Cable power 5V	321	432	вВІІ	84	4671	0	0	
Рис. 6. Интерфейс программы Radiomon
Заключение
Разработаны РПМ с возможностью подключения датчиков ГТИ, выполняющие следующие основные функции:
1)	электропитание в экономичном режиме подключаемого к нему датчика ГТИ (при наличии физической возможности);
2)	аналого-цифровое преобразование сигнала с аналогового датчика;
3)	измерение периода следования импульсов с импульсного датчика;
4)	передачу цифрового значения одного или нескольких параметров по радиоканалу на координатор радиосети.
Для оперативного мониторинга основных технологических параметров в режиме on-line разработан макет мобильного беспроводного информационного пульта, который позволяет отображать информацию с датчиков о ходе процесса строительства скважины на территории буровой, покрытой радиосетью.
Для диагностики беспроводной сети сбора данных написана программа Radiomon, позволяющая отслеживать основные параметры датчиков.
Работа выполнена при финансовой поддержке Министерства образования и науки РФ (проект № 2010-218-01-192).